<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NewFound Living — Home</title>
  <link rel="icon" type="image/png" sizes="32x32" href="Logos/tinylogo1.png" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* Increased base font size for this page so the relatively small
       amount of content reads comfortably across devices. Adjust here
       if you want slightly larger/smaller text than what I've chosen. */
    html { font-size: 18px; } /* ~18px base (was likely ~16px) */

    /* Page-local overrides to preserve the site's look while making copy readable */
    .intro {
      text-align: center !important;
      max-width: 860px;
      margin: 1rem auto;
    }
    .intro-text {
      margin-bottom: 0.9rem;
      line-height: 1.65;
      color: #e8f6f1;
      font-size: 1.05rem; /* ~19px */
    }

    /* Larger page title */
    .centered-title { font-size: 1.6rem; margin: 0.8rem 0; }

    /* Make feature list and details easier to read */
    .features-list li { font-size: 1.05rem; line-height: 1.6; margin-bottom: 0.5rem; }

    /* Logo sizing kept but slightly larger */
    .site-logo { width: var(--site-logo-width, 180px) !important; max-width:100%; height:auto !important; display:block; margin: 0 auto; }

    /* Ensure carousel main image transitions smoothly */
    #carouselImage { transition: opacity .28s ease; display:block; max-width:100%; height:auto; }

    /* Waitlist form styling (keeps readable controls at larger sizes) */
    .waitlist {
      background: rgba(255,255,255,0.04);
      padding: 1.1rem;
      border-radius: 8px;
      max-width: 860px;
      margin: 1rem auto;
      color: #e8f6f1;
      text-align: center;
    }
    .waitlist h2 { margin-top: 0; color: #fff; font-size: 1.25rem; }
    .waitlist p { font-size: 1.05rem; line-height: 1.6; }

    /* Center form controls and limit their width so the page doesn't feel empty */
    .waitlist-form { max-width: 740px; margin: 0.6rem auto; text-align: left; }
    .waitlist label { display:block; margin-top:0.6rem; font-weight:600; font-size:1.02rem; }
    .waitlist input[type="email"], .waitlist textarea {
      width:100%; padding:0.7rem; margin-top:0.25rem; border-radius:8px; border:1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.36); color: #fff; font-size:1rem;
      box-sizing: border-box;
    }

    /* Center the submit button horizontally (user request: move button to the middle) */
    .waitlist .button-row { text-align: center; }
    .waitlist button {
      display: inline-block;
      margin: 0.9rem auto 0;
      background:#2b8a78;
      color:#fff;
      border:none;
      padding:0.7rem 1.1rem;
      border-radius:8px;
      cursor:pointer;
      font-size:1rem;
    }

    .waitlist-feedback { margin-top:0.8rem; color:#dff0e6; font-weight:600; font-size:1rem; text-align:center; }

    /* Keep footer readable at larger sizes */
    .footer-row .email-link, .footer-row .social-link { font-size:1rem; }
  </style>
</head>
<body>
  <nav class="navbar-minimal" role="navigation" aria-label="Main navigation">
    <div class="nav-center">
      <div class="nav-left-placeholder" aria-hidden="true"></div>

      <ul class="nav-links" role="menubar">
        <li><a href="index.html" class="nav-link active" role="menuitem">Home</a></li>
        <li><a href="rental-application.html" class="nav-link" role="menuitem">Application</a></li>
        <li><a href="about.html" class="nav-link" role="menuitem">About</a></li>
      </ul>

      <button class="nav-toggle" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu">
        <span class="hamburger" aria-hidden="true"></span>
      </button>
    </div>

    <div id="mobile-menu" class="mobile-menu-wrap hidden" aria-hidden="true">
      <nav class="mobile-menu" role="menu" aria-label="Mobile menu">
        <a role="menuitem" href="index.html">Home</a>
        <a role="menuitem" href="rental-application.html">Application</a>
        <a role="menuitem" href="about.html">About</a>
      </nav>
    </div>
  </nav>

  <main>
    <div class="container">

      <!-- Intro panel: logo above the centered intro copy (preserved content & layout) -->
      <section class="intro-panel" aria-label="Welcome to Newfound Living">
        <div class="logo-container" aria-hidden="true">
          <img src="Logos/logo-transparent.png" alt="Newfound Living Logo" class="site-logo" />
        </div>

        <div class="intro" aria-label="About Newfound Living">
          <p class="intro-text">
            Welcome to <strong>Newfound Living</strong> — a locally owned rental company based in Newfoundland. We take pride in offering clean, comfortable homes that people are proud to live in.
          </p>

          <p class="intro-text">
            Explore our rentals below or submit a rental application directly through our website. Your next home might be closer than you think.
          </p>
        </div>
      </section>
      <!-- /Intro panel -->

      <!-- Rentals full + waitlist: replaces the previous ad/listing area.
           This keeps the site's header/footer/background identical while making the content larger and easier to read. -->
      <section id="rentals-full" class="waitlist" aria-labelledby="rentals-full-title">
        <h2 id="rentals-full-title">All our rentals are currently full</h2>
        <p>We appreciate your interest — at the moment all properties are occupied. If you'd like to join our waitlist, leave your email and any details below and we'll notify you when a suitable property becomes available.</p>

        <!-- Formspree waitlist form (uses existing endpoint) -->
        <form id="waitlist-form" action="https://formspree.io/f/xldnwbqq" method="POST" class="waitlist-form" novalidate>
          <input type="hidden" name="_subject" value="Waitlist request — NewFound Living">
          <input type="hidden" name="_captcha" value="true">

          <label for="waitlist-email">Email <span aria-hidden="true">*</span></label>
          <input type="email" id="waitlist-email" name="email" required placeholder="you@example.com" autocomplete="email">

          <label for="waitlist-message">Comments (optional)</label>
          <textarea id="waitlist-message" name="message" rows="5" placeholder="Move-in date, household size, pets, preferred neighbourhood, etc."></textarea>

          <div class="button-row">
            <button type="submit">Join Waitlist</button>
          </div>
        </form>

        <!-- The "Prefer to email" line and duplicate email address have been removed per your request. -->

        <div id="waitlist-feedback" class="waitlist-feedback" aria-live="polite" style="display:none;"></div>
      </section>
      <!-- /Rentals full -->

    </div>
  </main>

  <a class="floating-contact" href="mailto:info.newfoundliving@gmail.com?subject=General Inquiry" aria-label="Contact Newfound Living">Contact</a>

  <!-- Modal / Lightbox (kept for gallery functionality) -->
  <div id="galleryModal" class="modal" aria-hidden="true" role="dialog" aria-label="Image gallery">
    <div class="lightbox" role="document">
      <div class="lightbox-main" role="region" aria-label="Image viewer">
        <button class="close" aria-label="Close gallery" onclick="closeModal()">×</button>
        <button class="lb-btn lb-prev" aria-label="Previous image" onclick="prevImage()">❮</button>
        <button class="lb-btn lb-next" aria-label="Next image" onclick="nextImage()">❯</button>
        <button id="slideshowToggle" class="slideshow-toggle" aria-pressed="false" title="Toggle slideshow">▶</button>
        <img id="modalImg" src="" alt="">
      </div>
      <div class="lightbox-thumbs" id="thumbStrip" aria-label="Image thumbnails"></div>
    </div>
  </div>

  <footer class="site-footer" role="contentinfo">
    <div class="footer-row">
      <div class="email-link">
        <img class="icon" src="https://img.icons8.com/ios-filled/50/ffffff/new-post.png" alt="Email icon" />
        <a href="mailto:info.newfoundliving@gmail.com">info.newfoundliving@gmail.com</a>
      </div>
      <div class="social-link">
        <img class="icon" src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="Facebook logo" />
        <a href="https://www.facebook.com/profile.php?id=61577097797242" target="_blank" rel="noopener">Visit our Facebook page</a>
      </div>
    </div>
    <div class="privacy">We never share or sell your information. Your privacy is important to us.</div>
  </footer>

  <script>
  // Mobile menu (unchanged)
  (function () {
    const toggle = document.querySelector('.nav-toggle');
    const wrap = document.getElementById('mobile-menu');
    if (!toggle || !wrap) return;
    function open(){ toggle.classList.add('open'); toggle.setAttribute('aria-expanded','true'); wrap.classList.remove('hidden'); wrap.classList.add('visible'); wrap.setAttribute('aria-hidden','false'); }
    function close(){ toggle.classList.remove('open'); toggle.setAttribute('aria-expanded','false'); wrap.classList.remove('visible'); wrap.classList.add('hidden'); wrap.setAttribute('aria-hidden','true'); }
    toggle.addEventListener('click', ()=> { if(wrap.classList.contains('visible')) close(); else open(); });
    toggle.addEventListener('keydown', (e)=> { if(e.key==='Enter' || e.key===' ') { e.preventDefault(); toggle.click(); } if(e.key==='Escape') close(); });
    wrap.addEventListener('click', (e)=> { if(e.target.closest('a')) close(); });
    window.addEventListener('resize', ()=> { if(window.innerWidth > 760) close(); });
  })();

  // Carousel + Thumbnail logic — unchanged; safe-exit if no carousel exists on this page
  (function () {
    const wrap = document.querySelector('.carousel-wrap');
    if (!wrap) return;

    const mainImg = document.getElementById('carouselImage');
    const thumbNodes = Array.from(document.querySelectorAll('.carousel-thumbs img'));
    const leftBtn = document.querySelector('.carousel-arrow-left');
    const rightBtn = document.querySelector('.carousel-arrow-right');

    const gallery = thumbNodes.map((t, i) => ({ src: t.getAttribute('src'), alt: t.getAttribute('alt') || ('Image ' + (i+1)), thumbEl: t }));

    function filenameKey(url) {
      if (!url) return '';
      try {
        const u = new URL(url, window.location.href);
        let name = (u.pathname.split('/').pop() || '').toLowerCase();
        name = decodeURIComponent(name).replace(/\.[^/.]+$/, '');
        name = name.replace(/[_\-\.]+/g, ' ').trim();
        return name;
      } catch (err) {
        return String(url).toLowerCase();
      }
    }

    function findPreferredIndex() {
      const keys = gallery.map(g => filenameKey(g.src));
      let idx = keys.findIndex(k => k === 'main outside');
      if (idx >= 0) return idx;
      idx = keys.findIndex(k => k.includes('main') && k.includes('outside'));
      if (idx >= 0) return idx;
      idx = keys.findIndex(k => k === 'main');
      if (idx >= 0) return idx;
      idx = keys.findIndex(k => k.includes('main'));
      if (idx >= 0) return idx;
      return 0;
    }

    let current = findPreferredIndex();

    function show(i) {
      if (!gallery.length || !mainImg) return;
      i = (i + gallery.length) % gallery.length;
      const item = gallery[i];
      mainImg.style.opacity = '0';
      const pre = new Image();
      pre.onload = () => {
        mainImg.src = item.src;
        mainImg.alt = item.alt;
        requestAnimationFrame(() => { mainImg.style.opacity = '1'; });
      };
      pre.src = item.src;
      gallery.forEach((g, idx) => { if (g.thumbEl) g.thumbEl.classList.toggle('active', idx === i); });
      current = i;
    }

    function prev() { show(current - 1); }
    function next() { show(current + 1); }

    if (leftBtn) leftBtn.addEventListener('click', prev);
    if (rightBtn) rightBtn.addEventListener('click', next);

    gallery.forEach((g, i) => {
      if (!g.thumbEl) return;
      g.thumbEl.tabIndex = 0;
      g.thumbEl.addEventListener('click', () => show(i));
      g.thumbEl.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); show(i); } });
    });

    wrap.tabIndex = 0;
    wrap.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') { e.preventDefault(); prev(); }
      if (e.key === 'ArrowRight') { e.preventDefault(); next(); }
    });

    if (mainImg) {
      mainImg.addEventListener('click', () => {
        if (typeof window.openModalAtIndex === 'function') window.openModalAtIndex(current);
      });
    }

    show(current);
  })();

  (function () {
    const gallerySelector = '.carousel-thumbs img';
    const galleryImgs = Array.from(document.querySelectorAll(gallerySelector));
    const modal = document.getElementById('galleryModal');
    const modalImg = document.getElementById('modalImg');
    const thumbStrip = document.getElementById('thumbStrip');
    const slideshowToggle = document.getElementById('slideshowToggle');
    const prevBtn = document.querySelector('.lb-prev');
    const nextBtn = document.querySelector('.lb-next');
    if (!modal) return;

    let idx = 0, autoplay = false, autoplayInterval = null, DELAY = 3000;

    function buildThumbs() {
      if (!thumbStrip) return;
      thumbStrip.innerHTML = '';
      galleryImgs.forEach((imgEl, i) => {
        const t = document.createElement('img');
        t.src = imgEl.src;
        t.alt = imgEl.alt || ('Image ' + (i + 1));
        t.dataset.index = i;
        t.tabIndex = 0;
        t.addEventListener('click', () => showImage(i));
        t.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); showImage(i); } });
        thumbStrip.appendChild(t);
      });
    }
    function setActiveThumb(i) {
      if (!thumbStrip) return;
      const thumbs = Array.from(thumbStrip.querySelectorAll('img'));
      thumbs.forEach((t, j) => t.classList.toggle('active', j === i));
    }
    function showImage(i) {
      const img = galleryImgs[i];
      if (!img) return;
      modalImg.src = img.src; modalImg.alt = img.alt || ('Image ' + (i + 1)); idx = i; setActiveThumb(idx);
    }
    window.openModalAtIndex = function (i) {
      if (!galleryImgs.length) return;
      idx = (typeof i === 'number') ? i : 0;
      buildThumbs(); showImage(idx);
      modal.style.display = 'flex'; modal.setAttribute('aria-hidden','false'); document.body.style.overflow = 'hidden';
      if (prevBtn) prevBtn.focus();
    };
    window.closeModal = function () {
      if (autoplayInterval) { clearInterval(autoplayInterval); autoplayInterval = null; autoplay = false; slideshowToggle.textContent = '▶'; slideshowToggle.setAttribute('aria-pressed','false'); }
      modal.style.display = 'none'; modal.setAttribute('aria-hidden','true'); document.body.style.overflow = '';
    };
    window.prevImage = function () { if (!galleryImgs.length) return; showImage((idx - 1 + galleryImgs.length) % galleryImgs.length); };
    window.nextImage = function () { if (!galleryImgs.length) return; showImage((idx + 1) % galleryImgs.length); };
    function startAuto() { if (autoplayInterval) return; autoplay = true; slideshowToggle.textContent = '⏸'; slideshowToggle.setAttribute('aria-pressed','true'); autoplayInterval = setInterval(() => { window.nextImage(); }, DELAY); }
    function stopAuto() { autoplay = false; slideshowToggle.textContent = '▶'; slideshowToggle.setAttribute('aria-pressed','false'); if (autoplayInterval) { clearInterval(autoplayInterval); autoplayInterval = null; } }

    if (slideshowToggle) slideshowToggle.addEventListener('click', () => autoplay ? stopAuto() : startAuto());
    if (prevBtn) prevBtn.addEventListener('click', () => window.prevImage());
    if (nextBtn) nextBtn.addEventListener('click', () => window.nextImage());
    if (modal) modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
    document.addEventListener('keydown', (e) => {
      if (modal && modal.style.display === 'flex') {
        if (e.key === 'Escape') closeModal();
        else if (e.key === 'ArrowLeft') window.prevImage();
        else if (e.key === 'ArrowRight') window.nextImage();
      }
    });
  })();
  </script>

  <!-- Waitlist form AJAX logic (keeps user on same page and shows inline feedback) -->
  <script>
  (function () {
    var form = document.getElementById('waitlist-form');
    var feedback = document.getElementById('waitlist-feedback');
    if (!form) return;
    form.addEventListener('submit', function (e) {
      e.preventDefault();
      var action = form.action;
      var data = new FormData(form);
      fetch(action, {
        method: 'POST',
        body: data,
        headers: { 'Accept': 'application/json' }
      }).then(function (response) {
        if (response.ok) {
          feedback.style.display = 'block';
          feedback.textContent = 'Thanks — we received your request and will be in touch.';
          form.reset();
        } else {
          response.json().then(function (data) {
            feedback.style.display = 'block';
            feedback.textContent = data.error || 'Submission failed. Please email info.newfoundliving@gmail.com';
          }).catch(function () {
            feedback.style.display = 'block';
            feedback.textContent = 'Submission failed. Please email info.newfoundliving@gmail.com';
          });
        }
      }).catch(function () {
        feedback.style.display = 'block';
        feedback.textContent = 'Submission failed. Please email info.newfoundliving@gmail.com';
      });
    });
  })();
  </script>

</body>
</html>
