{% extends "layout.html" %}

{% block title %}Newfound Living - Rental Properties in St. John's{% endblock %}

{% block content %}
  <img src="{{ url_for('static', filename='images/logo-transparent.png') }}" alt="Newfound Living Logo" class="logo">

  <h1>Welcome to Newfound Living</h1>
  <h2>All of our rental homes are currently filled, but you can be the first to know when new properties become available. Enter your email below for updates!</h2>

  <form id="notify-form" action="https://formspree.io/f/xldnwbqq" method="POST" autocomplete="off">
    <input type="email" name="email" placeholder="Your email address" required aria-label="Email address" />
    <textarea name="message" placeholder="Anything else you’d like us to know? (optional)" aria-label="Your message"></textarea>
    <button type="submit">Notify Me</button>
  </form>

  <div id="thank-you">Thank you for joining our list! You'll be notified as soon as something is available.</div>

  <section class="features">
    <div class="feature-box">
      <div aria-hidden="true">🔧</div>
      <h3>Stress-Free Renting</h3>
      <p>Enjoy well-maintained, comfortable homes and responsive service from a local team.</p>
    </div>
    <div class="feature-box">
      <div aria-hidden="true">💡</div>
      <h3>Transparent Pricing</h3>
      <p>Clear, fair rental rates with no hidden fees — ever.</p>
    </div>
    <div class="feature-box">
      <div aria-hidden="true">🏠</div>
      <h3>Local Expertise</h3>
      <p>Born and based in St. John’s. We know the city, the neighborhoods, and the market.</p>
    </div>
  </section>
{% endblock %}

{% block scripts %}
<script>
  const form = document.getElementById('notify-form');
  const thankYou = document.getElementById('thank-you');

  form.addEventListener('submit', async function (e) {
    e.preventDefault();
    const formData = new FormData(form);

    try {
      await fetch(form.action, {
        method: 'POST',
        body: formData,
        headers: { 'Accept': 'application/json' }
      });
      form.reset();
      thankYou.style.display = 'block';
      setTimeout(() => { thankYou.style.display = 'none'; }, 6000);
    } catch (err) {
      alert('Something went wrong. Please try again later.');
    }
  });
</script>
{% endblock %}
