{% extends "layout.html" %}

{% block title %}Newfound Living - Rental Application{% endblock %}

{% block content %} 
<div class="rental-container" role="main" aria-label="Rental Application Form">
    <h1>Rental Application</h1>
    <form id="rental-form" action="https://formspree.io/f/xldnwbqq" method="POST" enctype="multipart/form-data" novalidate>
        <fieldset>
            <!-- Removed Property Details heading per request -->
            <label for="property-address">Property Address</label>
            <input type="text" id="property-address" name="property_address" required placeholder="e.g., 123 Main St" />

            <div class="checkbox-group" role="group" aria-label="Rental Unit">
                <label><input type="checkbox" name="rental_unit_main" value="Main Unit" /> Main Unit</label>
                <label><input type="checkbox" name="rental_unit_basement" value="Basement Apartment" /> Basement Apartment</label>
                <label>
                <input type="checkbox" name="rental_unit_other" value="Other" /> Other:
                <input type="text" name="rental_unit_other_text" placeholder="Specify" style="width: 120px; display: inline-block;" />
                </label>
            </div>

            <label for="move-in-date">Desired Move-in Date</label>
            <input type="date" id="move-in-date" name="move_in_date" required />
        </fieldset>

        <fieldset>
            <legend><strong>Applicant Information</strong></legend>

            <label for="full-name">Full Name</label>
            <input type="text" id="full-name" name="full_name" required />

            <label for="dob">Date of Birth</label>
            <input type="date" id="dob" name="date_of_birth" required />

            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" name="phone_number" required />

            <label for="email">Email Address</label>
            <input type="email" id="email" name="email_address" required />

            <label for="current-address">Current Address</label>
            <input type="text" id="current-address" name="current_address" required />

            <label for="landlord-name">Landlord’s Name</label>
            <input type="text" id="landlord-name" name="landlord_name" />

            <label for="landlord-phone">Landlord’s Phone</label>
            <input type="tel" id="landlord-phone" name="landlord_phone" />

            <label for="reason-leaving">Reason for Leaving</label>
            <textarea id="reason-leaving" name="reason_for_leaving"></textarea>

            <label for="length-tenancy">Length of Tenancy</label>
            <input type="text" id="length-tenancy" name="length_of_tenancy" placeholder="e.g., 2 years" />
        </fieldset>

        <fieldset>
            <legend><strong>Employment / Income Verification</strong></legend>

            <label for="employer-name">Employer Name</label>
            <input type="text" id="employer-name" name="employer_name" required />

            <label for="position">Position</label>
            <input type="text" id="position" name="position" required />

            <label for="monthly-income">Monthly Income (Net)</label>
            <input type="number" id="monthly-income" name="monthly_income" required placeholder="e.g., 3000" />

            <label for="employment-length">Length of Employment</label>
            <input type="text" id="employment-length" name="length_of_employment" placeholder="e.g., 3 years" />

            <label><input type="checkbox" name="proof_of_income" value="Yes" /> Proof of income attached (required for all adult tenants)</label>

            <!-- Styled file upload button -->
            <label for="income-proof-file" class="file-label" tabindex="0">Choose file to upload proof of income</label>
            <input type="file" id="income-proof-file" name="income_proof_file" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx,.txt" />
        </fieldset>

        <fieldset>
            <legend><strong>Additional Occupants</strong></legend>

            <label for="occupant1">1. Name</label>
            <input type="text" id="occupant1" name="additional_occupant_1" />

            <label for="occupant2">2. Name</label>
            <input type="text" id="occupant2" name="additional_occupant_2" />

            <label for="occupant3">3. Name</label>
            <input type="text" id="occupant3" name="additional_occupant_3" />
        </fieldset>

        <fieldset>
            <legend><strong>Pets</strong></legend>
            <label><input type="radio" name="pets" value="Yes" /> Yes</label>
            <label><input type="radio" name="pets" value="No" checked /> No</label>
            <label for="pet-details">If yes, type/size/breed</label>
            <input type="text" id="pet-details" name="pet_details" placeholder="e.g., Small dog - Beagle" />
        </fieldset>

        <fieldset>
            <legend><strong>Emergency Contact</strong></legend>

            <label for="emergency-name">Name</label>
            <input type="text" id="emergency-name" name="emergency_contact_name" />

            <label for="emergency-phone">Phone</label>
            <input type="tel" id="emergency-phone" name="emergency_contact_phone" />

            <label for="emergency-relationship">Relationship to Applicant</label>
            <input type="text" id="emergency-relationship" name="emergency_contact_relationship" />
        </fieldset>

        <fieldset>
            <legend><strong>References</strong></legend>

            <label for="reference1-name">1. Name</label>
            <input type="text" id="reference1-name" name="reference_1_name" />

            <label for="reference1-phone">1. Phone</label>
            <input type="tel" id="reference1-phone" name="reference_1_phone" />

            <label for="reference2-name">2. Name</label>
            <input type="text" id="reference2-name" name="reference_2_name" />

            <label for="reference2-phone">2. Phone</label>
            <input type="tel" id="reference2-phone" name="reference_2_phone" />
        </fieldset>

        <fieldset>
            <legend><strong>Declaration</strong></legend>

            <p>I declare that the information provided is true and complete. I understand that providing false information or failing to disclose relevant details may result in denial or termination of tenancy. I authorize Newfound Living Inc. to contact employers, landlords, and references to verify this application.</p>

            <label for="applicant-signature">Signature</label>
            <input type="text" id="applicant-signature" name="applicant_signature" placeholder="Type your full name" required />

            <label for="applicant-signature-date">Date</label>
            <input type="date" id="applicant-signature-date" name="applicant_signature_date" required />

            <label for="coapplicant-signature">Co-applicant Signature (if applicable)</label>
            <input type="text" id="coapplicant-signature" name="coapplicant_signature" placeholder="Type full name or leave blank" />

            <label for="coapplicant-signature-date">Co-applicant Date</label>
            <input type="date" id="coapplicant-signature-date" name="coapplicant_signature_date" />
        </fieldset>

        <button type="submit">Submit Application</button>
    </form>
    <div id="thank-you-rental" role="alert" aria-live="polite">Thank you for submitting your application. We will review it and contact you shortly.</div>
</div> 
{% endblock %}

<!-- {% block scripts %}
<script>
  function copyEmail() {
    const email = document.getElementById('paymentEmail').innerText;
    navigator.clipboard.writeText(email).then(() => {
      alert('Email copied to clipboard!');
    });
  }

  const form = document.getElementById('confirm-form');
  const confirmationMessage = document.getElementById('confirmationMessage');

  form.addEventListener('submit', async function (e) {
    e.preventDefault();
    const formData = new FormData(form);

    try {
      await fetch(form.action, {
        method: 'POST',
        body: formData,
        headers: { 'Accept': 'application/json' }
      });
      form.reset();
      confirmationMessage.style.display = 'block';
    } catch (err) {
      alert('Something went wrong. Please try again later.');
    }
  });
</script>
{% endblock %} -->
