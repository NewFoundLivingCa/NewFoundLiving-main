<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rental Application - Newfound Living</title>
  <link rel="icon" type="image/png" sizes="32x32" href="/Logos/tinylogo1.png" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    :root{
      --brand:#21706A;
      --brand-hover:#1b5c53;
      --white:#ffffff;
    }
    html,body{height:100%; margin:0; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif; color:var(--white); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
    body{background-color:#111;}
    .container{max-width:980px; margin:0 auto; padding:1.6rem; box-sizing:border-box; position:relative; z-index:1;}
    .logo{display:block; margin:1rem auto; max-width:220px;}
    /* small page-scoped controls (fallback if styles.css doesn't include them) */
    .btn-brand{background:var(--brand); color:#fff; border:0; padding:.8em 1.2em; border-radius:8px; cursor:pointer; box-shadow:0 6px 18px rgba(33,112,106,0.14);}
    .paste-centered{display:inline-block; margin-top:8px; background:#444; color:#fff; border:0; padding:.55em .9em; border-radius:8px; cursor:pointer;}
    .form-section{margin-bottom:1.4rem; padding:1.2rem; background:rgba(255,255,255,0.03); border-radius:0.9rem;}
    .helper{color:#dfeee9; font-size:0.98em;}
    .btn-mini{background:var(--brand); color:#fff; border:0; padding:.5em .8em; border-radius:6px; cursor:pointer;}
    .occupant-fields input, .reference-fields input { padding:.6em; border-radius:6px; border:1px solid #444; background:rgba(255,255,255,0.06); color:#fff; }
    textarea { min-height:110px; padding:.8em; border-radius:8px; border:1px solid #444; background:rgba(255,255,255,0.06); color:#fff; width:100%; box-sizing:border-box; }
  </style>
</head>
<body>
  <!-- Nav: matches Home/About pages -->
  <nav class="navbar-minimal" role="navigation" aria-label="Main navigation">
    <div class="nav-center">
      <div aria-hidden="true" style="width:34px;height:1px;"></div>

      <ul class="nav-links" role="menubar" aria-hidden="false">
        <li><a role="menuitem" href="index.html" class="nav-link">Home</a></li>
        <li><a role="menuitem" href="rental-application.html" class="nav-link active">Application</a></li>
        <li><a role="menuitem" href="about.html" class="nav-link">About</a></li>
      </ul>

      <button class="nav-toggle" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu">
        <span class="hamburger" aria-hidden="true"></span>
      </button>
    </div>

    <div id="mobile-menu" class="mobile-menu-wrap hidden" aria-hidden="true">
      <nav class="mobile-menu" role="menu" aria-label="Mobile menu">
        <a role="menuitem" href="index.html" class="mobile-link">Home</a>
        <a role="menuitem" href="rental-application.html" class="mobile-link">Application</a>
        <a role="menuitem" href="about.html" class="mobile-link">About</a>
      </nav>
    </div>
  </nav>

  <main>
    <div class="container">
      <img src="Logos/logo-transparent.png" alt="Newfound Living Logo" class="logo" />
      <h1 style="text-align:center; margin-top:0.4rem;">Rental Application</h1>

      <form id="rental-form" action="https://formspree.io/f/xldnwbqq" method="POST" novalidate>
        <fieldset class="form-section" aria-label="Personal information">
          <label for="full-name">Full Name</label>
          <input type="text" id="full-name" name="full_name" required />

          <label for="email">Email</label>
          <input type="email" id="email" name="email_address" required />

          <label for="phone">Phone Number</label>
          <input type="tel" id="phone" name="phone_number" required />

          <label for="current-address">Current Address</label>
          <input type="text" id="current-address" name="current_address" required />

          <label for="landlord-name">Current Landlord Name</label>
          <input type="text" id="landlord-name" name="landlord_name" />

          <label for="landlord-contact">Landlord Contact (Phone or Email)</label>
          <input type="text" id="landlord-contact" name="landlord_contact" />
        </fieldset>

        <fieldset class="form-section" aria-label="Property details">
          <h2>Property Details</h2>
          <label for="property-address">Property Address</label>
          <input type="text" id="property-address" name="property_address" required placeholder="e.g., 123 Main St" />

          <label for="move-in-date">Desired Move-in Date</label>
          <input type="date" id="move-in-date" name="move_in_date" required />

          <label for="term">Lease Term</label>
          <select id="term" name="lease_term">
            <option value="">Select</option>
            <option value="12 months">12 months</option>
            <option value="month-to-month">Month-to-month</option>
          </select>
        </fieldset>

        <fieldset class="form-section" aria-label="Employment and proof of income">
          <h2>Employment / Income</h2>
          <label for="employer-name">Employer Name</label>
          <input type="text" id="employer-name" name="employer_name" required />

          <label><strong>Proof of Income / Financial Assistance</strong></label>
          <p class="helper" style="max-width:760px; text-align:center;">
            Either upload using the Google Form and paste the confirmation/Drive link below, or open your mail client and attach documents manually.
          </p>

          <div class="option-group" role="radiogroup" aria-label="Proof submission method" style="display:flex; gap:1rem; justify-content:center;">
            <label class="option-label" style="display:inline-flex; gap:.5rem; align-items:center;">
              <input type="radio" name="proof_option" value="google_form" checked />
              <span>Google Form</span>
            </label>

            <label class="option-label" style="display:inline-flex; gap:.5rem; align-items:center;">
              <input type="radio" name="proof_option" value="email" />
              <span>Email</span>
            </label>
          </div>

          <div id="google-flow" class="proof-flow" aria-hidden="false" style="text-align:center; margin-top:.8rem;">
            <button type="button" id="open-google-form" class="btn-brand" aria-label="Open Google Form to upload proof of income">Open Google Form to upload proof</button>

            <div class="inline-row" style="margin-top:10px;">
              <input type="url" id="proof-income-link" name="proof_income_link" placeholder="Paste Google Form confirmation or Drive link here" aria-label="Paste proof link" style="width:80%; padding:.6em; border-radius:8px; border:1px solid #444; background:rgba(255,255,255,0.04); color:#fff;" />
            </div>

            <div style="margin-top:8px;">
              <button type="button" id="paste-clipboard" class="paste-centered" title="Paste URL from clipboard" aria-label="Paste link from clipboard">Paste link</button>
            </div>
          </div>

          <div id="email-flow" class="proof-flow" style="display:none; margin-top:.8rem;" aria-hidden="true">
            <p class="helper" style="max-width:760px; text-align:center;">
              Click the button below to open your email client. Attach your proof of income and include your full name &amp; property address in the message so we can match it to your application.
            </p>
            <div style="text-align:center; margin-top:12px;">
              <button type="button" id="email-proof-btn" class="btn-mini" title="Email proof">Email Proof of Income</button>
            </div>
          </div>
        </fieldset>

        <fieldset class="form-section" aria-label="Pets">
          <h2 style="text-align:center;">PETS</h2>
          <div class="pets-center-block" style="display:flex; flex-direction:column; align-items:center;">
            <label class="pets-question-label" style="font-weight:600; margin-bottom:.6rem;">Do you have pets?</label>
            <div class="pet-yesno" role="radiogroup" aria-label="Do you have pets?" style="display:flex; gap:1.2rem;">
              <label class="pet-option" style="display:inline-flex; gap:.5rem; align-items:center;">
                <input type="radio" name="pets" value="Yes" />
                <span>Yes</span>
              </label>
              <label class="pet-option" style="display:inline-flex; gap:.5rem; align-items:center;">
                <input type="radio" name="pets" value="No" checked />
                <span>No</span>
              </label>
            </div>
          </div>

          <label for="pet-type" style="margin-top:12px;">Other / Breed (if applicable)</label>
          <input type="text" id="pet-type" name="pet_type_text" placeholder="e.g., Beagle, Medium / Other details" />

          <label for="pet-number">How many pets?</label>
          <input type="number" id="pet-number" name="pet_number" min="0" />

          <label for="pet-details">Description (age, vaccinated, etc.)</label>
          <textarea id="pet-details" name="pet_details" placeholder="Describe your pets"></textarea>
        </fieldset>

        <fieldset class="form-section" aria-label="Other details">
          <h2>Other Details</h2>

          <label>Additional Occupants</label>
          <div id="occupants-list">
            <div class="occupant-fields" data-index="1" style="display:flex; gap:8px; flex-wrap:wrap; margin-top:.6rem;">
              <input type="text" name="occupant_name_1" placeholder="Name" style="flex:1 1 200px"/>
              <input type="number" name="occupant_age_1" placeholder="Age" min="0" style="width:120px"/>
              <input type="tel" name="occupant_phone_1" placeholder="Phone Number" style="flex:1 1 180px"/>
            </div>
          </div>
          <button type="button" class="btn-mini plus" id="add-occupant" style="margin-top:10px;"><span class="plus-symbol">+</span> Add Occupant</button>

          <label style="margin-top:12px; display:block;">References</label>
          <div id="references-list">
            <div class="reference-fields" data-index="1" style="display:flex; gap:8px; flex-wrap:wrap; margin-top:.6rem;">
              <input type="text" name="reference_name_1" placeholder="Name" style="flex:1 1 200px"/>
              <input type="tel" name="reference_phone_1" placeholder="Phone Number" style="width:160px"/>
              <input type="text" name="reference_relationship_1" placeholder="Relationship" style="flex:1 1 160px"/>
            </div>
          </div>
          <button type="button" class="btn-mini plus" id="add-reference" style="margin-top:10px;"><span class="plus-symbol">+</span> Add Reference</button>

          <label for="emergency-contact" style="margin-top:12px">Emergency Contact Name</label>
          <input type="text" id="emergency-contact" name="emergency_contact" />

          <label for="emergency-phone">Emergency Contact Phone</label>
          <input type="tel" id="emergency-phone" name="emergency_phone" />

          <label for="other-info">Any other information you'd like to provide?</label>
          <textarea id="other-info" name="other_info"></textarea>
        </fieldset>

        <fieldset class="form-section" aria-label="Declaration">
          <h2>Declaration</h2>
          <p class="declaration-text" style="color:#dfeee9;">I declare that the information provided is true and complete. I authorize Newfound Living to verify this application.</p>
          <label for="applicant-signature">Signature</label>
          <input type="text" id="applicant-signature" name="applicant_signature" required />

          <label for="applicant-signature-date">Date</label>
          <input type="date" id="applicant-signature-date" name="applicant_signature_date" required />
        </fieldset>

        <div class="form-actions" style="text-align:center; margin:1.2rem 0;">
          <button type="submit" class="btn-submit">Submit Application</button>
        </div>
      </form>
    </div>
  </main>

  <!-- Footer: matched to Home/About pages -->
  <footer class="site-footer" role="contentinfo">
    <div class="footer-row">
      <div class="email-link">
        <img class="icon" src="https://img.icons8.com/ios-filled/50/ffffff/new-post.png" alt="Email icon" />
        <a href="mailto:info.newfoundliving@gmail.com">info.newfoundliving@gmail.com</a>
      </div>

      <div class="social-link">
        <img class="icon" src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="Facebook logo" />
        <a href="https://www.facebook.com/profile.php?id=61577097797242" target="_blank" rel="noopener">Visit our Facebook page</a>
      </div>
    </div>

    <div class="privacy">We never share or sell your information. Your privacy is important to us.</div>
  </footer>

  <script>
    // Mobile menu behavior (shared pattern used on Home/About)
    (function () {
      const toggle = document.querySelector('.nav-toggle');
      const wrap = document.getElementById('mobile-menu');
      if (!toggle || !wrap) return;

      function open() {
        toggle.classList.add('open');
        toggle.setAttribute('aria-expanded','true');
        wrap.classList.remove('hidden');
        wrap.classList.add('visible');
        wrap.setAttribute('aria-hidden','false');
        const first = wrap.querySelector('a');
        if (first) first.focus();
      }
      function close(returnFocus = true) {
        toggle.classList.remove('open');
        toggle.setAttribute('aria-expanded','false');
        wrap.classList.remove('visible');
        wrap.classList.add('hidden');
        wrap.setAttribute('aria-hidden','true');
        if (returnFocus) toggle.focus();
      }

      toggle.addEventListener('click', function () {
        if (wrap.classList.contains('visible')) close(); else open();
      });

      toggle.addEventListener('keydown', function (e) {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle.click(); }
        if (e.key === 'Escape') close();
      });

      wrap.addEventListener('click', function (e) {
        const a = e.target.closest('a');
        if (a) close(false);
      });

      window.addEventListener('resize', function () {
        if (window.innerWidth > 760) close(false);
      });
    })();

    // Occupant / Reference dynamic adders
    (function () {
      let occupantCount = 1;
      const addOccupantBtn = document.getElementById('add-occupant');
      const occupantsList = document.getElementById('occupants-list');

      addOccupantBtn.addEventListener('click', () => {
        occupantCount++;
        const div = document.createElement('div');
        div.className = 'occupant-fields';
        div.dataset.index = occupantCount;
        div.style.display = 'flex';
        div.style.gap = '8px';
        div.style.flexWrap = 'wrap';
        div.style.marginTop = '.6rem';

        div.innerHTML = `
          <input type="text" name="occupant_name_${occupantCount}" placeholder="Name" style="flex:1 1 200px"/>
          <input type="number" name="occupant_age_${occupantCount}" placeholder="Age" min="0" style="width:120px"/>
          <input type="tel" name="occupant_phone_${occupantCount}" placeholder="Phone Number" style="flex:1 1 180px"/>
          <button type="button" class="btn-mini remove-entry" aria-label="Remove occupant" style="margin-left:6px;">Remove</button>
        `;
        occupantsList.appendChild(div);

        div.querySelector('.remove-entry').addEventListener('click', () => div.remove());
      });

      let referenceCount = 1;
      const addReferenceBtn = document.getElementById('add-reference');
      const referencesList = document.getElementById('references-list');

      addReferenceBtn.addEventListener('click', () => {
        referenceCount++;
        const div = document.createElement('div');
        div.className = 'reference-fields';
        div.dataset.index = referenceCount;
        div.style.display = 'flex';
        div.style.gap = '8px';
        div.style.flexWrap = 'wrap';
        div.style.marginTop = '.6rem';

        div.innerHTML = `
          <input type="text" name="reference_name_${referenceCount}" placeholder="Name" style="flex:1 1 200px"/>
          <input type="tel" name="reference_phone_${referenceCount}" placeholder="Phone Number" style="width:160px"/>
          <input type="text" name="reference_relationship_${referenceCount}" placeholder="Relationship" style="flex:1 1 160px"/>
          <button type="button" class="btn-mini remove-entry" aria-label="Remove reference" style="margin-left:6px;">Remove</button>
        `;
        referencesList.appendChild(div);

        div.querySelector('.remove-entry').addEventListener('click', () => div.remove());
      });
    })();

    // Proof of income flow (Google form / Email)
    (function () {
      const proofRadios = Array.from(document.querySelectorAll('input[name="proof_option"]'));
      const googleFlow = document.getElementById('google-flow');
      const emailFlow = document.getElementById('email-flow');
      const openGoogleBtn = document.getElementById('open-google-form');
      const pasteBtn = document.getElementById('paste-clipboard');
      const proofLinkInput = document.getElementById('proof-income-link');
      const emailProofBtn = document.getElementById('email-proof-btn');

      // Set your Google Form URL here (optional). If empty, the button will open Google Forms homepage.
      const GOOGLE_FORM_URL = ''; // e.g. 'https://forms.gle/yourFormId'

      function showFlow() {
        const val = document.querySelector('input[name="proof_option"]:checked').value;
        if (val === 'google_form') {
          googleFlow.style.display = '';
          googleFlow.setAttribute('aria-hidden','false');
          emailFlow.style.display = 'none';
          emailFlow.setAttribute('aria-hidden','true');
        } else {
          googleFlow.style.display = 'none';
          googleFlow.setAttribute('aria-hidden','true');
          emailFlow.style.display = '';
          emailFlow.setAttribute('aria-hidden','false');
        }
      }

      proofRadios.forEach(r => r.addEventListener('change', showFlow));
      showFlow();

      openGoogleBtn.addEventListener('click', () => {
        if (GOOGLE_FORM_URL && GOOGLE_FORM_URL.trim() !== '') {
          window.open(GOOGLE_FORM_URL, '_blank', 'noopener');
        } else {
          window.open('https://docs.google.com/forms', '_blank', 'noopener');
        }
      });

      pasteBtn.addEventListener('click', async () => {
        if (!navigator.clipboard) {
          alert('Clipboard API not available. Please paste manually (Ctrl/Cmd+V).');
          return;
        }
        try {
          const text = await navigator.clipboard.readText();
          if (text && text.trim()) {
            proofLinkInput.value = text.trim();
            proofLinkInput.focus();
          } else {
            alert('No URL text found in clipboard.');
          }
        } catch (err) {
          console.error(err);
          alert('Unable to read clipboard. Your browser may require permission.');
        }
      });

      emailProofBtn.addEventListener('click', () => {
        const to = 'info.newfoundliving@gmail.com';
        const fullName = (document.getElementById('full-name') || {value:''}).value;
        const property = (document.getElementById('property-address') || {value:''}).value;
        const subject = `Proof of Income for ${fullName || '[Your Name]'} - ${property || '[Property]'}`;
        const bodyLines = [
          'Hello Newfound Living,',
          '',
          'I am attaching proof of income for my rental application.',
          '',
          `Name: ${fullName || ''}`,
          `Property: ${property || ''}`,
          '',
          'Please confirm receipt and that this is matched to my application.',
          '',
          'Thank you.'
        ];
        const mailto = `mailto:${encodeURIComponent(to)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(bodyLines.join('\n'))}`;
        window.location.href = mailto;
      });
    })();

    // Accessible form submit handler
    (function () {
      const form = document.getElementById('rental-form');
      form.addEventListener('submit', (e) => {
        if (!form.checkValidity()) {
          const firstInvalid = form.querySelector(':invalid');
          if (firstInvalid) firstInvalid.focus();
          e.preventDefault();
        }
      });
    })();
  </script>
</body>
</html>
