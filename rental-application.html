<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rental Application - Newfound Living</title>
  <link rel="icon" type="image/png" sizes="32x32" href="/Logos/tinylogo1.png" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* Minimal page variables â€” visual styles live in styles.css */
    :root{
      --brand:#21706A;
      --brand-hover:#1b5c53;
      --white:#ffffff;
    }
    html,body{height:100%; margin:0; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif; color:var(--white); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
    /* no inline background-image here; styles.css controls the page background */
    body{background-color:#111;}
    .container{max-width:980px; margin:0 auto; padding:1.6rem; box-sizing:border-box; position:relative; z-index:1;}
    .logo{display:block; margin:1rem auto; max-width:220px;}
  </style>
</head>
<body>
  <nav class="navbar-minimal" role="navigation" aria-label="Main navigation">
    <div class="nav-center">
      <div aria-hidden="true" style="width:34px;height:1px;"></div>

      <ul class="nav-links" role="menubar" aria-hidden="false">
        <li><a role="menuitem" href="index.html" class="nav-link">Home</a></li>
        <li><a role="menuitem" href="rental-application.html" class="nav-link active">Application</a></li>
        <li><a role="menuitem" href="about.html" class="nav-link">About</a></li>
      </ul>

      <button class="nav-toggle" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu">
        <span class="hamburger" aria-hidden="true"></span>
      </button>
    </div>

    <div id="mobile-menu" class="mobile-menu-wrap hidden" aria-hidden="true">
      <nav class="mobile-menu" role="menu" aria-label="Mobile menu">
        <a role="menuitem" href="index.html" class="mobile-link">Home</a>
        <a role="menuitem" href="rental-application.html" class="mobile-link">Application</a>
        <a role="menuitem" href="about.html" class="mobile-link">About</a>
      </nav>
    </div>
  </nav>

  <div class="overlay" aria-hidden="true"></div>

  <main>
    <div class="container">
      <img src="Logos/logo-transparent.png" alt="Newfound Living Logo" class="logo" />
      <h1 style="text-align:center; margin-top:0.4rem;">Rental Application</h1>

      <form id="rental-form" action="https://formspree.io/f/xldnwbqq" method="POST" novalidate>
        <fieldset class="form-section">
          <label for="full-name">Full Name</label>
          <input type="text" id="full-name" name="full_name" required />
          <label for="email">Email</label>
          <input type="email" id="email" name="email_address" required />
          <label for="phone">Phone Number</label>
          <input type="tel" id="phone" name="phone_number" required />
          <label for="current-address">Current Address</label>
          <input type="text" id="current-address" name="current_address" required />
          <label for="landlord-name">Current Landlord Name</label>
          <input type="text" id="landlord-name" name="landlord_name" />
          <label for="landlord-contact">Landlord Contact (Phone or Email)</label>
          <input type="text" id="landlord-contact" name="landlord_contact" />
        </fieldset>

        <fieldset class="form-section">
          <h2>Property Details</h2>
          <label for="property-address">Property Address</label>
          <input type="text" id="property-address" name="property_address" required placeholder="e.g., 123 Main St" />
          <label for="move-in-date">Desired Move-in Date</label>
          <input type="date" id="move-in-date" name="move_in_date" required />
          <label for="term">Lease Term</label>
          <select id="term" name="lease_term">
            <option value="">Select</option>
            <option value="12 months">12 months</option>
            <option value="month-to-month">Month-to-month</option>
          </select>
        </fieldset>

        <!-- Employment / Income -->
        <fieldset class="form-section">
          <h2>Employment / Income</h2>
          <label for="employer-name">Employer Name</label>
          <input type="text" id="employer-name" name="employer_name" required />

          <label><strong>Proof of Income / Financial Assistance</strong></label>
          <p class="helper" style="max-width:760px; text-align:center;">Please either upload using our Google Form (you may need to sign in) then paste the confirmation/Drive link below, or click "Email Proof of Income" to open your mail client and attach your documents manually.</p>

          <!-- Centered option group with matching styles -->
          <div class="option-group" role="radiogroup" aria-label="Proof submission method">
            <label class="option-label">
              <input type="radio" name="proof_option" value="google_form" checked />
              <span class="option-indicator"></span>
              <span class="option-text">Google Form</span>
            </label>

            <label class="option-label">
              <input type="radio" name="proof_option" value="email" />
              <span class="option-indicator"></span>
              <span class="option-text">Email</span>
            </label>
          </div>

          <div id="google-flow" class="proof-flow" aria-hidden="false">
            <button type="button" id="open-google-form" class="btn-brand" aria-label="Open Google Form to upload proof of income">Open Google Form to upload proof</button>

            <div class="inline-row" style="margin-top:10px;">
              <input type="url" id="proof-income-link" name="proof_income_link" placeholder="Paste Google Form confirmation or Drive link here" aria-label="Paste proof link" />
            </div>

            <button type="button" id="paste-clipboard" class="paste-centered" title="Paste URL from clipboard" aria-label="Paste link from clipboard">Paste link</button>
          </div>

          <div id="email-flow" class="proof-flow" style="display:none;">
            <p class="helper" style="max-width:760px; text-align:center;">Click the button below to open your email client. Attach your proof of income and include your full name &amp; property address in the message so we can match it to your application.</p>
            <!-- Centered email button -->
            <div style="text-align:center; margin-top:12px;">
              <button type="button" id="email-proof-btn" class="btn-mini" title="Email proof">Email Proof of Income</button>
            </div>
          </div>
        </fieldset>

        <!-- PETS -->
        <fieldset class="form-section">
          <h2 style="text-align:center;">PETS</h2>

          <div class="pets-center-block">
            <label class="pets-question-label">Do you have pets?</label>

            <!-- Styled yes/no options (mutually exclusive radios) -->
            <div class="pet-yesno" role="radiogroup" aria-label="Do you have pets?">
              <label class="pet-option">
                <input type="radio" name="pets" value="Yes" />
                <span class="pet-indicator" aria-hidden="true"></span>
                <span class="pet-label-text">Yes</span>
              </label>

              <label class="pet-option">
                <input type="radio" name="pets" value="No" checked />
                <span class="pet-indicator" aria-hidden="true"></span>
                <span class="pet-label-text">No</span>
              </label>
            </div>
          </div>

          <!-- Removed the Dog/Cat/Bird/Reptile checkbox group as requested -->

          <label for="pet-type" style="margin-top:12px;">Other / Breed (if applicable)</label>
          <input type="text" id="pet-type" name="pet_type_text" placeholder="e.g., Beagle, Medium / Other details" />
          <label for="pet-number">How many pets?</label>
          <input type="number" id="pet-number" name="pet_number" min="0" />
          <label for="pet-details">Description (age, vaccinated, etc.)</label>
          <textarea id="pet-details" name="pet_details" placeholder="Describe your pets"></textarea>
        </fieldset>

        <fieldset class="form-section">
          <h2>Other Details</h2>
          <label>Additional Occupants</label>
          <div id="occupants-list">
            <div class="occupant-fields" style="display:flex; gap:8px; flex-wrap:wrap;">
              <input type="text" name="occupant_name_1" placeholder="Name" style="flex:1 1 200px"/>
              <input type="number" name="occupant_age_1" placeholder="Age" min="0" style="width:120px"/>
              <input type="tel" name="occupant_phone_1" placeholder="Phone Number" style="flex:1 1 180px"/>
            </div>
          </div>
          <button type="button" class="btn-mini plus" id="add-occupant" style="margin-top:10px;"><span class="plus-symbol">+</span> Add Occupant</button>

          <label style="margin-top:12px">References</label>
          <div id="references-list">
            <div class="reference-fields" style="display:flex; gap:8px; flex-wrap:wrap;">
              <input type="text" name="reference_name_1" placeholder="Name" style="flex:1 1 200px"/>
              <input type="tel" name="reference_phone_1" placeholder="Phone Number" style="width:160px"/>
              <input type="text" name="reference_relationship_1" placeholder="Relationship" style="flex:1 1 160px"/>
            </div>
          </div>
          <button type="button" class="btn-mini plus" id="add-reference" style="margin-top:10px;"><span class="plus-symbol">+</span> Add Reference</button>

          <label for="emergency-contact" style="margin-top:12px">Emergency Contact Name</label>
          <input type="text" id="emergency-contact" name="emergency_contact" />
          <label for="emergency-phone">Emergency Contact Phone</label>
          <input type="tel" id="emergency-phone" name="emergency_phone" />
          <label for="other-info">Any other information you'd like to provide?</label>
          <textarea id="other-info" name="other_info"></textarea>
        </fieldset>

        <fieldset class="form-section">
          <h2>Declaration</h2>
          <p class="declaration-text">I declare that the information provided is true and complete. I authorize Newfound Living to verify this application.</p>
          <label for="applicant-signature">Signature</label>
          <input type="text" id="applicant-signature" name="applicant_signature" required />
          <label for="applicant-signature-date">Date</label>
          <input type="date" id="applicant-signature-date" name="applicant_signature_date" required />
        </fieldset>

        <div class="form-actions">
          <button type="submit" class="btn-submit">Submit Application</button>
        </div>
      </form>
    </div>
  </main>

  <footer class="site-footer" role="contentinfo">
    <div class="footer-row">
      <div class="email-link">
        <img class="icon" src="https://img.icons8.com/ios-filled/50/ffffff/new-post.png" alt="Email icon" />
        <a href="mailto:info.newfoundliving@gmail.com">info.newfoundliving@gmail.com</a>
      </div>
      <div class="social-link">
        <img class="icon" src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="Facebook logo" />
        <a href="https://www.facebook.com/profile.php?id=61577097797242" target="_blank" rel="noopener">Visit our Facebook page</a>
      </div>
    </div>
    <div class="privacy">We never share or sell your information. Your privacy is important to us.</div>
  </footer>

  <script>
    // Mobile menu behavior (same shared pattern as index)
    (function () {
      const toggle = document.querySelector('.nav-toggle');
      const wrap = document.getElementById('mobile-menu');
      if (!toggle || !wrap) return;

      function open() {
        toggle.classList.add('open');
        toggle.setAttribute('aria-expanded','true');
        wrap.classList.remove('hidden');
        wrap.classList.add('visible');
        wrap.setAttribute('aria-hidden','false');
        const first = wrap.querySelector('a');
        if (first) first.focus();
      }
      function close(returnFocus = true) {
        toggle.classList.remove('open');
        toggle.setAttribute('aria-expanded','false');
        wrap.classList.remove('visible');
        wrap.classList.add('hidden');
        wrap.setAttribute('aria-hidden','true');
        if (returnFocus) toggle.focus();
      }

      toggle.addEventListener('click', function () {
        if (wrap.classList.contains('visible')) close(); else open();
      });

      toggle.addEventListener('keydown', function (e) {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle.click(); }
        if (e.key === 'Escape') close();
      });

      wrap.addEventListener('click', function (e) {
        const a = e.target.closest('a');
        if (a) close(false);
      });

      window.addEventListener('resize', function () {
        if (window.innerWidth > 760) close(false);
      });
    })();

    // Dynamic adders for occupants & references
    (function () {
      const addOccupant = document.getElementById('add-occupant');
      const addReference = document.getElementById('add-reference');
      if (addOccupant) {
        addOccupant.addEventListener('click', function () {
          const list = document.getElementById('occupants-list');
          const count = list.querySelectorAll('.occupant-fields').length + 1;
          const div = document.createElement('div');
          div.className = 'occupant-fields';
          div.style.display = 'flex';
          div.style.gap = '8px';
          div.style.flexWrap = 'wrap';
          div.innerHTML = `<input type="text" name="occupant_name_${count}" placeholder="Name" style="flex:1 1 200px" /><input type="number" name="occupant_age_${count}" placeholder="Age" min="0" style="width:120px" /><input type="tel" name="occupant_phone_${count}" placeholder="Phone Number" style="flex:1 1 180px" />`;
          list.appendChild(div);
        });
      }
      if (addReference) {
        addReference.addEventListener('click', function () {
          const list = document.getElementById('references-list');
          const count = list.querySelectorAll('.reference-fields').length + 1;
          const div = document.createElement('div');
          div.className = 'reference-fields';
          div.style.display = 'flex';
          div.style.gap = '8px';
          div.style.flexWrap = 'wrap';
          div.innerHTML = `<input type="text" name="reference_name_${count}" placeholder="Name" style="flex:1 1 200px" /><input type="tel" name="reference_phone_${count}" placeholder="Phone Number" style="width:160px" /><input type="text" name="reference_relationship_${count}" placeholder="Relationship" style="flex:1 1 160px" />`;
          list.appendChild(div);
        });
      }
    })();

    // Pets: show/hide fields and clear when No
    (function () {
      const petRadios = document.querySelectorAll('input[name="pets"]');
      const petTypeText = document.getElementById('pet-type');
      const petNumber = document.getElementById('pet-number');
      const petDetails = document.getElementById('pet-details');

      function updatePetUI() {
        const yes = document.querySelector('input[name="pets"][value="Yes"]')?.checked;
        // No separate pet-types list to show (removed per request)
        if (!yes) {
          if (petTypeText) petTypeText.value = '';
          if (petNumber) petNumber.value = '';
          if (petDetails) petDetails.value = '';
        }
      }
      petRadios.forEach(r => r.addEventListener('change', updatePetUI));
      updatePetUI();
    })();

    // Proof-of-income behavior: Google Form, paste helper, email button, and validation
    (function () {
      const GOOGLE_FORM_SHORT = 'https://forms.gle/1eoWj53oeUU6LiRk9';
      const EMAIL_ADDRESS = 'info.newfoundliving@gmail.com';

      const openGoogleBtn = document.getElementById('open-google-form');
      const pasteBtn = document.getElementById('paste-clipboard');
      const proofLinkInput = document.getElementById('proof-income-link');
      const emailProofBtn = document.getElementById('email-proof-btn');
      const proofOptionRadios = document.querySelectorAll('input[name="proof_option"]');
      const googleFlow = document.getElementById('google-flow');
      const emailFlow = document.getElementById('email-flow');
      const form = document.getElementById('rental-form');

      if(openGoogleBtn){
        openGoogleBtn.addEventListener('click', ()=> window.open(GOOGLE_FORM_SHORT, '_blank', 'noopener,noreferrer'));
      }

      if(pasteBtn){
        pasteBtn.addEventListener('click', async ()=>{
          if(!navigator.clipboard){ alert('Clipboard API not available. Paste the link manually.'); return; }
          try{
            const text = await navigator.clipboard.readText();
            if(text && /^https?:\/\//i.test(text.trim())){
              if(proofLinkInput){ proofLinkInput.value = text.trim(); proofLinkInput.focus(); }
            } else {
              alert('Clipboard does not contain a URL. Copy the confirmation or Drive link and try again.');
            }
          }catch(err){
            console.error('Clipboard read failed', err);
            alert('Could not read clipboard. Please paste the link manually.');
          }
        });
      }

      if(emailProofBtn){
        emailProofBtn.addEventListener('click', ()=>{
          const name = (document.getElementById('full-name') || {}).value || '[applicant name]';
          const email = (document.getElementById('email') || {}).value || '';
          const phone = (document.getElementById('phone') || {}).value || '';
          const subject = encodeURIComponent(`Proof of income from ${name}`);
          const bodyLines = [
            `Applicant: ${name}`,
            `Email: ${email}`,
            `Phone: ${phone}`,
            '',
            'Attached: (please attach your proof of income to this email)',
            '',
            'Property (if applicable):',
            ''
          ];
          const body = encodeURIComponent(bodyLines.join('\n'));
          window.location.href = `mailto:${EMAIL_ADDRESS}?subject=${subject}&body=${body}`;
        });
      }

      function updateFlows(){
        const selected = document.querySelector('input[name="proof_option"]:checked')?.value;
        if(googleFlow) googleFlow.style.display = selected === 'google_form' ? 'block' : 'none';
        if(emailFlow) emailFlow.style.display = selected === 'email' ? 'block' : 'none';
      }
      proofOptionRadios.forEach(r=>r.addEventListener('change', updateFlows));
      updateFlows();

      if(form){
        form.addEventListener('submit', function(e){
          const selected = document.querySelector('input[name="proof_option"]:checked')?.value;
          const link = (proofLinkInput && proofLinkInput.value || '').trim();
          if(selected === 'google_form'){
            if(!link){
              e.preventDefault();
              alert('You selected Google Form upload. Please paste the confirmation or Drive link from the Google Form into the field so we can locate your file (or upload now and then paste the link).');
              if(proofLinkInput) proofLinkInput.focus();
              return false;
            }
            if(link && !/^https?:\/\//i.test(link)){
              e.preventDefault();
              alert('The link you provided does not look like a valid URL. Please paste the Google Form confirmation or Drive share link.');
              if(proofLinkInput) proofLinkInput.focus();
              return false;
            }
          } else if(selected === 'email'){
            if(!confirm('You selected Email. After submitting this application, please send an email with your attachment to info.newfoundliving@gmail.com including your full name and property address so we can match it to your application. Click OK to submit.')){
              e.preventDefault();
              return false;
            }
          }
          return true;
        });
      }
    })();
  </script>
</body>
</html>
